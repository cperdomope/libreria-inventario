<!--
    LIBRERÍA DIGITAL - SISTEMA DE INVENTARIO
    Archivo: index.html
    Descripción: Página principal del sistema de inventario de la librería
    
    ESTRUCTURA GENERAL:
    - Header con navegación y información de usuario
    - Sidebar con menú de navegación (responsive)
    - Área principal con secciones dinámicas:
      * Dashboard: Estadísticas y resumen general
      * Inventario: Gestión completa de libros (CRUD)
      * Stock: Control de inventario y alertas
      * Ventas: Sistema de facturación y ventas
      * Usuarios: Gestión de usuarios del sistema
      * Reportes: Informes y estadísticas detalladas
    - Modales para formularios y acciones
    - Sistema de notificaciones toast
    
    TECNOLOGÍAS UTILIZADAS:
    - HTML5 semántico
    - Tailwind CSS (via CDN)
    - Font Awesome 6.4.0 (iconos)
    - Chart.js (gráficos)
    - JavaScript vanilla (modular)
    
    COMPATIBILIDAD:
    - Responsive design (móvil, tablet, desktop)
    - Navegadores modernos (Chrome 80+, Firefox 75+, Safari 13+)
    
    SEGURIDAD:
    - Control de acceso basado en roles
    - Validación de permisos en frontend y backend
    - Escapado de HTML para prevenir XSS
-->
<!DOCTYPE html>
<html lang="es">

<head>
    <!-- Configuración básica -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Librería Digital - Sistema de Inventario</title>
    
    <!-- Librerías externas via CDN -->
    <script src="https://cdn.tailwindcss.com"></script> <!-- Framework CSS utilitario -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script> <!-- Iconos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- Gráficos para dashboard -->

    <!-- Hojas de estilo personalizadas (orden de carga importante) -->
    <link rel="stylesheet" href="assets/css/styles.css">        <!-- Estilos base y variables CSS -->
    <link rel="stylesheet" href="assets/css/components.css">   <!-- Componentes reutilizables -->
    <link rel="stylesheet" href="assets/css/animations.css">   <!-- Animaciones y transiciones -->
    <link rel="stylesheet" href="assets/css/responsive.css">  <!-- Media queries responsive -->
    <link rel="stylesheet" href="assets/css/inventory.css">    <!-- Estilos específicos inventario -->
    <link rel="stylesheet" href="assets/css/text-fix.css">     <!-- Correcciones visibilidad texto -->
</head>

<!-- 
    ESTRUCTURA DEL BODY:
    1. Header fijo: Logo, búsqueda, notificaciones y usuario
    2. Layout flex: Sidebar + Contenido principal
    3. Sidebar: Navegación entre secciones (responsive)
    4. Main: Área de contenido dinámico por secciones
    5. Modales: Formularios y ventanas emergentes
    6. Toast container: Notificaciones del sistema
    7. Scripts: JavaScript modular al final
-->
<body class="bg-gray-50 min-h-screen">
    
    <!-- HEADER: Barra superior fija con navegación principal -->
    <header class="gradient-bg text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <!-- Lado izquierdo: Logo y título -->
                <div class="flex items-center space-x-4">
                    <!-- Botón para abrir/cerrar sidebar en móvil -->
                    <button id="sidebarToggle" class="lg:hidden text-white hover:text-gray-200">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <!-- Logo y título de la aplicación -->
                    <div class="flex items-center space-x-3">
                        <div class="header-logo">
                            <i class="fas fa-book text-2xl"></i>
                        </div>
                        <div>
                            <h1 class="header-title">Librería Digital el Saber</h1>
                            <p class="header-subtitle">Sistema de Inventario</p>
                        </div>
                    </div>
                </div>

                <!-- Lado derecho: Búsqueda, notificaciones y usuario -->
                <div class="flex items-center space-x-6">
                    <!-- Barra de búsqueda (oculta en móvil) -->
                    <div class="hidden md:flex items-center space-x-4">
                        <div class="relative">
                            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input type="text" placeholder="Buscar libros..." class="search-input">
                        </div>
                    </div>

                    <div class="flex items-center space-x-4">
                        <!-- Botón de notificaciones -->
                        <div class="relative">
                            <button class="relative text-white hover:text-gray-200 transition-colors">
                                <i class="fas fa-bell text-xl"></i>
                                <!-- Badge de notificaciones (se actualiza dinámicamente) -->
                                <span class="notification-badge">3</span>
                            </button>
                        </div>

                        <!-- Información del usuario actual -->
                        <div class="flex items-center space-x-3 user-info">
                            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face"
                                alt="Usuario" class="user-avatar">
                            <div class="hidden md:block">
                                <!-- Datos del usuario (se cargan dinámicamente) -->
                                <p class="font-medium" data-user-name>Cargando...</p>
                                <p class="text-sm opacity-75" data-user-role>...</p>
                            </div>
                            <!-- Botón de cerrar sesión -->
                            <button data-logout-btn class="ml-2 text-white hover:text-gray-200 transition-colors" title="Cerrar sesión">
                                <i class="fas fa-sign-out-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- LAYOUT PRINCIPAL: Sidebar + Contenido -->
    <div class="flex">
        
        <!-- SIDEBAR: Menú de navegación lateral -->
        <!-- 
            COMPORTAMIENTO RESPONSIVE:
            - Desktop: Fijo y siempre visible
            - Tablet/Móvil: Overlay que se oculta/muestra con sidebarToggle
            - Transiciones suaves con sidebar-transition class
        -->
        <aside id="sidebar"
            class="sidebar-transition bg-white shadow-lg w-64 min-h-screen fixed lg:static lg:translate-x-0 -translate-x-full z-40">
            <nav class="p-6">
                <!-- Menú de navegación: cada item controla una sección -->
                <ul class="space-y-2">
                    <li>
                        <a href="#" data-section="dashboard"
                            class="nav-link flex items-center space-x-3 text-gray-700 p-3 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition-all duration-200 bg-indigo-50 text-indigo-600 active">
                            <i class="fas fa-chart-pie w-5"></i>
                            <span class="font-medium">Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-section="inventory"
                            class="nav-link flex items-center space-x-3 text-gray-700 p-3 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition-all duration-200">
                            <i class="fas fa-book w-5"></i>
                            <span class="font-medium">Inventario</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-section="stock"
                            class="nav-link flex items-center space-x-3 text-gray-700 p-3 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition-all duration-200">
                            <i class="fas fa-boxes w-5"></i>
                            <span class="font-medium">Control de Stock</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-section="sales"
                            class="nav-link flex items-center space-x-3 text-gray-700 p-3 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition-all duration-200">
                            <i class="fas fa-shopping-cart w-5"></i>
                            <span class="font-medium">Ventas</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-section="reports"
                            class="nav-link flex items-center space-x-3 text-gray-700 p-3 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition-all duration-200">
                            <i class="fas fa-chart-bar w-5"></i>
                            <span class="font-medium">Reportes</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-section="users"
                            class="nav-link flex items-center space-x-3 text-gray-700 p-3 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition-all duration-200">
                            <i class="fas fa-users w-5"></i>
                            <span class="font-medium">Usuarios</span>
                        </a>
                    </li>
                </ul>

                <div class="mt-8 pt-8 border-t border-gray-200">
                    <button onclick="handleLogout()"
                        class="w-full flex items-center space-x-3 text-gray-700 p-3 rounded-lg hover:bg-red-50 hover:text-red-600 transition-all duration-200">
                        <i class="fas fa-sign-out-alt w-5"></i>
                        <span class="font-medium">Cerrar Sesión</span>
                    </button>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1">
            <!-- Dashboard Section -->
            <section id="dashboard-section" class="content-section p-6 active">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Dashboard</h2>
                    <p class="text-gray-600">Resumen general del sistema de inventario</p>
                </div>

                <!-- KPI Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8">
                    <div class="card-hover bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-600 text-sm font-medium uppercase tracking-wide">Total Libros</p>
                                <p id="total-books" class="text-3xl font-bold text-gray-900">2,547</p>
                                <p class="text-gray-500 text-sm mt-1">En inventario</p>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <i class="fas fa-book text-blue-600 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="card-hover bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-green-600 text-sm font-medium uppercase tracking-wide">Ventas Hoy</p>
                                <p id="sales-today" class="text-3xl font-bold text-gray-900">8</p>
                                <p class="text-gray-500 text-sm mt-1">Transacciones</p>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <i class="fas fa-shopping-cart text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="card-hover bg-white rounded-xl shadow-md p-6 border-l-4 border-yellow-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-yellow-600 text-sm font-medium uppercase tracking-wide">Stock Bajo</p>
                                <p id="low-stock" class="text-3xl font-bold text-gray-900">3</p>
                                <p class="text-red-500 text-sm mt-1">
                                    <i class="fas fa-exclamation-triangle mr-1"></i>
                                    Requiere atención
                                </p>
                            </div>
                            <div class="bg-yellow-100 p-3 rounded-full">
                                <i class="fas fa-exclamation-triangle text-yellow-600 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="card-hover bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-purple-600 text-sm font-medium uppercase tracking-wide">Clientes</p>
                                <p id="total-clients" class="text-3xl font-bold text-gray-900">127</p>
                                <p class="text-gray-500 text-sm mt-1">Registrados</p>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-full">
                                <i class="fas fa-users text-purple-600 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="card-hover bg-white rounded-xl shadow-md p-6 border-l-4 border-indigo-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-indigo-600 text-sm font-medium uppercase tracking-wide">Ingresos Hoy</p>
                                <p id="revenue-today" class="text-3xl font-bold text-gray-900">$342,500</p>
                                <p class="text-green-600 text-sm mt-1">
                                    <i class="fas fa-arrow-up mr-1"></i>
                                    +15.3% vs ayer
                                </p>
                            </div>
                            <div class="bg-indigo-100 p-3 rounded-full">
                                <i class="fas fa-dollar-sign text-indigo-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <!-- Sales by Category Chart -->
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                            <i class="fas fa-chart-bar mr-2 text-blue-600"></i>
                            Ventas por Categoría
                        </h3>
                        <div class="h-80">
                            <canvas id="salesByCategoryChart"></canvas>
                        </div>
                    </div>

                    <!-- Sales Trend Chart -->
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                            <i class="fas fa-chart-line mr-2 text-green-600"></i>
                            Tendencia de Ventas (7 días)
                        </h3>
                        <div class="h-80">
                            <canvas id="salesTrendChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Dashboard Grid -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Recent Activity -->
                    <div class="lg:col-span-2 bg-white rounded-xl shadow-md p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                            <i class="fas fa-history mr-2 text-gray-600"></i>
                            Actividad Reciente
                        </h3>
                        <div id="recent-activity" class="space-y-4 max-h-96 overflow-y-auto">
                            <!-- Activity items will be loaded here -->
                        </div>
                    </div>

                    <!-- Side Panel -->
                    <div class="space-y-6">
                        <!-- Critical Stock Alerts -->
                        <div class="bg-white rounded-xl shadow-md p-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                <i class="fas fa-exclamation-circle mr-2 text-red-600"></i>
                                Alertas de Stock Crítico
                            </h3>
                            <div id="critical-stock" class="space-y-3">
                                <!-- Critical stock items will be loaded here -->
                            </div>
                        </div>

                        <!-- Customer Summary -->
                        <div class="bg-white rounded-xl shadow-md p-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                <i class="fas fa-user-friends mr-2 text-purple-600"></i>
                                Resumen de Clientes
                            </h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="text-gray-600 text-sm">Nuevos hoy</span>
                                    <span id="new-clients-today" class="font-semibold text-gray-900">4</span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="text-gray-600 text-sm">Nuevos esta semana</span>
                                    <span id="new-clients-week" class="font-semibold text-gray-900">18</span>
                                </div>
                                <div class="mt-4">
                                    <p class="text-sm text-gray-600 mb-2">Cliente con más compras:</p>
                                    <div class="bg-gray-50 p-3 rounded-lg">
                                        <p id="top-client-name" class="font-medium text-gray-900">María José Hernández</p>
                                        <p id="top-client-purchases" class="text-sm text-gray-600">24 compras este mes</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Inventory Section -->
            <section id="inventory-section" class="content-section p-6">
                <div class="mb-8">
                    <div class="flex justify-between items-center">
                        <div>
                            <h2 class="text-3xl font-bold text-gray-900 mb-2">Gestión de Inventario</h2>
                            <p class="text-gray-600">Administra los libros de tu librería</p>
                        </div>
                        <button id="add-book-btn"
                            class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-colors">
                            <i class="fas fa-plus"></i>
                            <span>Agregar Libro</span>
                        </button>
                    </div>
                </div>

                <!-- Filtros y búsqueda -->
                <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                        <div class="flex flex-col sm:flex-row gap-4">
                            <div class="relative">
                                <i
                                    class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                <input type="text" id="search-input" placeholder="Buscar por título, autor, ISBN..."
                                    class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 w-full sm:w-80">
                            </div>
                            <select id="category-filter"
                                class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="">Todas las categorías</option>
                            </select>
                        </div>
                        <div class="flex gap-2">
                            <button id="advanced-filters-btn"
                                class="bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg flex items-center gap-2">
                                <i class="fas fa-filter"></i>
                                Filtros
                            </button>
                            <button
                                class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2">
                                <i class="fas fa-download"></i>
                                Exportar
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Lista de libros -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-semibold text-gray-900">Inventario de Libros</h3>
                            <span id="books-count"
                                class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">0
                                libros</span>
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Libro</th>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        ISBN</th>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Categoría</th>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Stock</th>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Precio</th>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Estado</th>
                                    <th
                                        class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="books-table-body" class="bg-white divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div
                                                class="h-12 w-8 bg-indigo-100 rounded flex items-center justify-center mr-4">
                                                <i class="fas fa-book text-indigo-600"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Cien años de soledad
                                                </div>
                                                <div class="text-sm text-gray-500">Gabriel García Márquez</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">978-0307474728</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800">
                                            Ficción
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">45</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">$28.500</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                                            Disponible
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <div class="flex justify-end gap-2">
                                            <button class="text-indigo-600 hover:text-indigo-900"><i
                                                    class="fas fa-eye"></i></button>
                                            <button class="text-yellow-600 hover:text-yellow-900"><i
                                                    class="fas fa-edit"></i></button>
                                            <button class="text-red-600 hover:text-red-900"><i
                                                    class="fas fa-trash"></i></button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div
                                                class="h-12 w-8 bg-green-100 rounded flex items-center justify-center mr-4">
                                                <i class="fas fa-book text-green-600"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">El Alquimista</div>
                                                <div class="text-sm text-gray-500">Paulo Coelho</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">978-0062315007</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">
                                            Autoayuda
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">3</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">$22.900</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">
                                            Stock Bajo
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <div class="flex justify-end gap-2">
                                            <button class="text-indigo-600 hover:text-indigo-900"><i
                                                    class="fas fa-eye"></i></button>
                                            <button class="text-yellow-600 hover:text-yellow-900"><i
                                                    class="fas fa-edit"></i></button>
                                            <button class="text-red-600 hover:text-red-900"><i
                                                    class="fas fa-trash"></i></button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div
                                                class="h-12 w-8 bg-yellow-100 rounded flex items-center justify-center mr-4">
                                                <i class="fas fa-book text-yellow-600"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Don Quijote de la Mancha
                                                </div>
                                                <div class="text-sm text-gray-500">Miguel de Cervantes</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">978-0060934347</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-orange-100 text-orange-800">
                                            Clásicos
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">12</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">$35.000</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                                            Disponible
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <div class="flex justify-end gap-2">
                                            <button class="text-indigo-600 hover:text-indigo-900"><i
                                                    class="fas fa-eye"></i></button>
                                            <button class="text-yellow-600 hover:text-yellow-900"><i
                                                    class="fas fa-edit"></i></button>
                                            <button class="text-red-600 hover:text-red-900"><i
                                                    class="fas fa-trash"></i></button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="bg-gray-50 px-6 py-3 border-t border-gray-200">
                        <div id="pagination-container" class="flex items-center justify-between">
                            <div id="pagination-info" class="text-sm text-gray-700">
                                Mostrando <span id="showing-from">0</span> a <span id="showing-to">0</span> de
                                <span id="total-records">0</span> resultados
                            </div>
                            <div id="pagination-buttons" class="flex gap-2">
                                <!-- Pagination buttons will be generated by JavaScript -->
                            </div>
                        </div>

                        <!-- Loading state -->
                        <div id="loading-state" class="hidden flex items-center justify-center py-8">
                            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
                            <span class="ml-2 text-gray-600">Cargando...</span>
                        </div>

                        <!-- Empty state -->
                        <div id="empty-state" class="hidden text-center py-8">
                            <i class="fas fa-book-open text-gray-400 text-4xl mb-4"></i>
                            <p class="text-gray-600 text-lg mb-2">No se encontraron libros</p>
                            <p class="text-gray-500 text-sm">Intenta ajustar los filtros de búsqueda</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Advanced Filters Modal -->
            <div id="advanced-filters-modal"
                class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
                <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Filtros Avanzados</h3>
                        <button id="close-filters-modal" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Estado -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Estado</label>
                            <select id="estado-filter"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="">Todos los estados</option>
                                <option value="disponible">Disponible</option>
                                <option value="agotado">Agotado</option>
                                <option value="descontinuado">Descontinuado</option>
                                <option value="reservado">Reservado</option>
                            </select>
                        </div>

                        <!-- Formato -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Formato</label>
                            <select id="formato-filter"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="">Todos los formatos</option>
                                <option value="tapa_dura">Tapa Dura</option>
                                <option value="tapa_blanda">Tapa Blanda</option>
                                <option value="bolsillo">Bolsillo</option>
                                <option value="digital">Digital</option>
                            </select>
                        </div>

                        <!-- Stock -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Stock</label>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" id="stock-bajo-filter"
                                        class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm text-gray-700">Solo stock bajo</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="agotado-filter"
                                        class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm text-gray-700">Solo agotados</span>
                                </label>
                            </div>
                        </div>

                        <!-- Destacados -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Especiales</label>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" id="destacado-filter"
                                        class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm text-gray-700">Solo destacados</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="nuevo-ingreso-filter"
                                        class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm text-gray-700">Nuevos ingresos</span>
                                </label>
                            </div>
                        </div>

                        <!-- Rango de precios -->
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Rango de Precios</label>
                            <div class="flex gap-4">
                                <div class="flex-1">
                                    <input type="number" id="precio-min" placeholder="Precio mínimo"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                </div>
                                <div class="flex-1">
                                    <input type="number" id="precio-max" placeholder="Precio máximo"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-end gap-3 mt-6">
                        <button id="clear-filters"
                            class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">
                            Limpiar Filtros
                        </button>
                        <button id="apply-filters"
                            class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">
                            Aplicar Filtros
                        </button>
                    </div>
                </div>
            </div>

            <!-- Add Book Modal -->
            <div id="add-book-modal"
                class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
                <div
                    class="relative top-10 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-2/3 xl:w-1/2 shadow-lg rounded-md bg-white max-h-screen overflow-y-auto">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-semibold text-gray-900">Agregar Nuevo Libro</h3>
                        <button id="close-add-book-modal" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>

                    <form id="add-book-form">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Información Básica -->
                            <div class="md:col-span-2">
                                <h4 class="text-lg font-medium text-gray-900 mb-4 border-b pb-2">Información Básica</h4>
                            </div>

                            <!-- Título -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Título *</label>
                                <input type="text" id="book-titulo" name="titulo" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                    placeholder="Ingrese el título del libro">
                            </div>

                            <!-- Subtítulo -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Subtítulo</label>
                                <input type="text" id="book-subtitulo" name="subtitulo"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                    placeholder="Subtítulo (opcional)">
                            </div>

                            <!-- Autor -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Autor *</label>
                                <input type="text" id="book-autor" name="autor" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                    placeholder="Nombre del autor">
                            </div>

                            <!-- Editorial -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Editorial</label>
                                <input type="text" id="book-editorial" name="editorial"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                    placeholder="Editorial">
                            </div>

                            <!-- ISBN -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ISBN</label>
                                <input type="text" id="book-isbn" name="isbn"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                    placeholder="ISBN-10">
                            </div>

                            <!-- ISBN13 -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ISBN-13</label>
                                <input type="text" id="book-isbn13" name="isbn13"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                    placeholder="ISBN-13">
                            </div>

                            <!-- Año de publicación -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Año de Publicación</label>
                                <input type="number" id="book-year" name="año_publicacion" min="1000" max="2030"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                    placeholder="2024">
                            </div>

                            <!-- Páginas -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Páginas</label>
                                <input type="number" id="book-paginas" name="paginas" min="1"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                    placeholder="300">
                            </div>

                            <!-- Categoría -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Categoría *</label>
                                <select id="book-categoria" name="categoria_id" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                    <option value="">Seleccione una categoría</option>
                                </select>
                            </div>

                            <!-- Formato -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Formato</label>
                                <select id="book-formato" name="formato"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                    <option value="tapa_blanda">Tapa Blanda</option>
                                    <option value="tapa_dura">Tapa Dura</option>
                                    <option value="bolsillo">Bolsillo</option>
                                    <option value="digital">Digital</option>
                                </select>
                            </div>

                            <!-- Información de Inventario -->
                            <div class="md:col-span-2">
                                <h4 class="text-lg font-medium text-gray-900 mb-4 border-b pb-2 mt-6">Información de
                                    Inventario</h4>
                            </div>

                            <!-- Precio de Compra -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Precio de Compra *</label>
                                <input type="number" id="book-precio-compra" name="precio_compra" step="0.01" min="0"
                                    required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                    placeholder="25000.00">
                            </div>

                            <!-- Precio de Venta -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Precio de Venta *</label>
                                <input type="number" id="book-precio-venta" name="precio_venta" step="0.01" min="0"
                                    required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                    placeholder="35000.00">
                            </div>

                            <!-- Stock Actual -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Stock Actual *</label>
                                <input type="number" id="book-stock-actual" name="stock_actual" min="0" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                    placeholder="10">
                            </div>

                            <!-- Stock Mínimo -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Stock Mínimo</label>
                                <input type="number" id="book-stock-minimo" name="stock_minimo" min="0" value="5"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                    placeholder="5">
                            </div>

                            <!-- Ubicación -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Ubicación</label>
                                <input type="text" id="book-ubicacion" name="ubicacion"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                    placeholder="A1-F01">
                            </div>

                            <!-- Estado -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Estado</label>
                                <select id="book-estado" name="estado"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                    <option value="disponible">Disponible</option>
                                    <option value="agotado">Agotado</option>
                                    <option value="reservado">Reservado</option>
                                </select>
                            </div>

                            <!-- Descripción -->
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Descripción</label>
                                <textarea id="book-descripcion" name="descripcion" rows="3"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                    placeholder="Descripción del libro (opcional)"></textarea>
                            </div>

                            <!-- Checkboxes especiales -->
                            <div class="md:col-span-2">
                                <h4 class="text-lg font-medium text-gray-900 mb-4 border-b pb-2 mt-4">Opciones
                                    Especiales</h4>
                                <div class="grid grid-cols-2 gap-4">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="book-destacado" name="destacado"
                                            class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                        <span class="ml-2 text-sm text-gray-700">Libro destacado</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="book-nuevo-ingreso" name="nuevo_ingreso"
                                            class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                        <span class="ml-2 text-sm text-gray-700">Nuevo ingreso</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Error messages -->
                        <div id="add-book-errors" class="hidden mt-4 p-4 bg-red-50 border border-red-200 rounded-md">
                            <div class="flex">
                                <div class="flex-shrink-0">
                                    <i class="fas fa-exclamation-circle text-red-400"></i>
                                </div>
                                <div class="ml-3">
                                    <h3 class="text-sm font-medium text-red-800">Error al agregar el libro</h3>
                                    <div id="error-list" class="mt-2 text-sm text-red-700"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Botones -->
                        <div class="flex justify-end gap-3 mt-8 pt-6 border-t">
                            <button type="button" id="cancel-add-book"
                                class="px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">
                                Cancelar
                            </button>
                            <button type="submit" id="save-book-btn"
                                class="px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50">
                                <span id="save-btn-text">Guardar Libro</span>
                                <i id="save-btn-spinner" class="fas fa-spinner fa-spin ml-2 hidden"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Other sections would go here -->
            <section id="stock-section" class="content-section p-6">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Control de Stock</h2>
                    <p class="text-gray-600">Gestiona entradas y salidas de inventario</p>
                </div>
                <!-- Resumen de stock -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-orange-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-orange-600 text-sm font-medium uppercase tracking-wide">Stock Crítico</p>
                                <p class="text-3xl font-bold text-gray-900">23</p>
                                <p class="text-red-600 text-sm mt-1">Requiere reposición urgente</p>
                            </div>
                            <div class="bg-orange-100 p-3 rounded-full">
                                <i class="fas fa-exclamation-triangle text-orange-600 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-600 text-sm font-medium uppercase tracking-wide">Entradas Hoy</p>
                                <p class="text-3xl font-bold text-gray-900">156</p>
                                <p class="text-green-600 text-sm mt-1">+12% vs ayer</p>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <i class="fas fa-arrow-up text-blue-600 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-purple-600 text-sm font-medium uppercase tracking-wide">Salidas Hoy</p>
                                <p class="text-3xl font-bold text-gray-900">89</p>
                                <p class="text-blue-600 text-sm mt-1">Ventas + Devoluciones</p>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-full">
                                <i class="fas fa-arrow-down text-purple-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Acciones rápidas -->
                <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Acciones Rápidas</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <button
                            class="bg-green-50 hover:bg-green-100 text-green-700 p-4 rounded-lg flex flex-col items-center gap-2 transition-colors">
                            <i class="fas fa-plus-circle text-2xl"></i>
                            <span class="text-sm font-medium">Entrada Stock</span>
                        </button>
                        <button
                            class="bg-red-50 hover:bg-red-100 text-red-700 p-4 rounded-lg flex flex-col items-center gap-2 transition-colors">
                            <i class="fas fa-minus-circle text-2xl"></i>
                            <span class="text-sm font-medium">Salida Stock</span>
                        </button>
                        <button
                            class="bg-blue-50 hover:bg-blue-100 text-blue-700 p-4 rounded-lg flex flex-col items-center gap-2 transition-colors">
                            <i class="fas fa-exchange-alt text-2xl"></i>
                            <span class="text-sm font-medium">Transferencia</span>
                        </button>
                        <button
                            class="bg-yellow-50 hover:bg-yellow-100 text-yellow-700 p-4 rounded-lg flex flex-col items-center gap-2 transition-colors">
                            <i class="fas fa-clipboard-check text-2xl"></i>
                            <span class="text-sm font-medium">Inventario</span>
                        </button>
                    </div>
                </div>

                <!-- Movimientos recientes -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-semibold text-gray-900">Movimientos Recientes</h3>
                            <button class="text-indigo-600 hover:text-indigo-800 text-sm font-medium">Ver todos</button>
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                        Fecha/Hora</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Tipo
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Libro
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Cantidad
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Usuario
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Motivo
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                        <div>
                                            <div>08 Ago 2025</div>
                                            <div class="text-gray-500">10:30 AM</div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                                            <i class="fas fa-arrow-up mr-1"></i> Entrada
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Rayuela - Julio
                                        Cortázar</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600">+25</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Carlos Perdomo</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Compra proveedor</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                        <div>
                                            <div>08 Ago 2025</div>
                                            <div class="text-gray-500">09:45 AM</div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">
                                            <i class="fas fa-arrow-down mr-1"></i> Salida
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">El Alquimista - Paulo
                                        Coelho</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-red-600">-2</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Ana García</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Venta cliente</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                        <div>
                                            <div>07 Ago 2025</div>
                                            <div class="text-gray-500">15:20 PM</div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">
                                            <i class="fas fa-exclamation mr-1"></i> Ajuste
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">1984 - George Orwell
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-yellow-600">-1</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Sistema</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Libro dañado</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="sales-section" class="content-section p-6">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Módulo de Ventas</h2>
                    <p class="text-gray-600">Gestiona las ventas y facturación</p>
                </div>
                <!-- Nueva venta -->
                <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Nueva Venta</h3>
                        <button id="create-sale-btn"
                            class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center gap-2"
                            onclick="openSaleModalDirect()">
                            <i class="fas fa-plus"></i>
                            Crear Venta
                        </button>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Cliente</label>
                            <div class="relative">
                                <input type="text" placeholder="Buscar cliente..."
                                    class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                <i
                                    class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Método de Pago</label>
                            <select
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                <option>Efectivo</option>
                                <option>Tarjeta de Crédito</option>
                                <option>Tarjeta de Débito</option>
                                <option>Transferencia</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Estadísticas de ventas -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                    <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-green-600 text-sm font-medium uppercase tracking-wide">Ventas Hoy</p>
                                <p class="text-2xl font-bold text-gray-900">$1,235,500</p>
                                <p class="text-green-600 text-sm mt-1">
                                    <i class="fas fa-arrow-up mr-1"></i>+8.1%
                                </p>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <i class="fas fa-dollar-sign text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-600 text-sm font-medium uppercase tracking-wide">Transacciones</p>
                                <p class="text-2xl font-bold text-gray-900">47</p>
                                <p class="text-blue-600 text-sm mt-1">
                                    <i class="fas fa-shopping-cart mr-1"></i>Hoy
                                </p>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <i class="fas fa-receipt text-blue-600 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-purple-600 text-sm font-medium uppercase tracking-wide">Ticket Promedio
                                </p>
                                <p class="text-2xl font-bold text-gray-900">$26,287</p>
                                <p class="text-purple-600 text-sm mt-1">
                                    <i class="fas fa-chart-line mr-1"></i>+3.2%
                                </p>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-full">
                                <i class="fas fa-calculator text-purple-600 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-orange-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-orange-600 text-sm font-medium uppercase tracking-wide">Libros Vendidos
                                </p>
                                <p class="text-2xl font-bold text-gray-900">125</p>
                                <p class="text-orange-600 text-sm mt-1">
                                    <i class="fas fa-book mr-1"></i>Unidades
                                </p>
                            </div>
                            <div class="bg-orange-100 p-3 rounded-full">
                                <i class="fas fa-box text-orange-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ventas recientes -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-semibold text-gray-900">Ventas Recientes</h3>
                            <div class="flex gap-2">
                                <button class="text-gray-600 hover:text-gray-800 p-2">
                                    <i class="fas fa-filter"></i>
                                </button>
                                <button class="text-indigo-600 hover:text-indigo-800 text-sm font-medium">Ver
                                    todas</button>
                            </div>
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table id="sales-table" class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Factura
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Cliente
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Fecha
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Items
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Total
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Estado
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Pago
                                    </th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase">
                                        Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="sales-table-body" class="divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm font-medium text-gray-900">#V-2025-001</div>
                                        <div class="text-sm text-gray-500">Sistema</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div
                                                class="h-10 w-10 bg-gray-300 rounded-full flex items-center justify-center mr-3">
                                                <i class="fas fa-user text-gray-600"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">María González</div>
                                                <div class="text-sm text-gray-500">maria@email.com</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                        <div>08 Ago 2025</div>
                                        <div class="text-gray-500">10:30 AM</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">3 libros</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">$87,500
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">
                                            Tarjeta
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                                            Completada
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <div class="flex justify-end gap-2">
                                            <button class="text-indigo-600 hover:text-indigo-900" title="Ver detalles">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="text-green-600 hover:text-green-900"
                                                title="Imprimir factura">
                                                <i class="fas fa-print"></i>
                                            </button>
                                            <button class="text-red-600 hover:text-red-900" title="Anular venta">
                                                <i class="fas fa-times-circle"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm font-medium text-gray-900">#V-2025-002</div>
                                        <div class="text-sm text-gray-500">Sistema</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div
                                                class="h-10 w-10 bg-gray-300 rounded-full flex items-center justify-center mr-3">
                                                <i class="fas fa-user text-gray-600"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Carlos Rodríguez</div>
                                                <div class="text-sm text-gray-500">carlos@email.com</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                        <div>08 Ago 2025</div>
                                        <div class="text-gray-500">09:15 AM</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">1 libro</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">$35,000
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                                            Efectivo
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                                            Completada
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <div class="flex justify-end gap-2">
                                            <button class="text-indigo-600 hover:text-indigo-900" title="Ver detalles">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="text-green-600 hover:text-green-900"
                                                title="Imprimir factura">
                                                <i class="fas fa-print"></i>
                                            </button>
                                            <button class="text-red-600 hover:text-red-900" title="Anular venta">
                                                <i class="fas fa-times-circle"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm font-medium text-gray-900">#V-2025-003</div>
                                        <div class="text-sm text-gray-500">Sistema</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div
                                                class="h-10 w-10 bg-gray-300 rounded-full flex items-center justify-center mr-3">
                                                <i class="fas fa-user text-gray-600"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Ana Martínez</div>
                                                <div class="text-sm text-gray-500">ana@email.com</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                        <div>07 Ago 2025</div>
                                        <div class="text-gray-500">16:45 PM</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">5 libros</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">$142,750
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800">
                                            Transferencia
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">
                                            Pendiente
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <div class="flex justify-end gap-2">
                                            <button class="text-indigo-600 hover:text-indigo-900" title="Ver detalles">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="text-green-600 hover:text-green-900" title="Confirmar pago">
                                                <i class="fas fa-check-circle"></i>
                                            </button>
                                            <button class="text-red-600 hover:text-red-900" title="Anular venta">
                                                <i class="fas fa-times-circle"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Paginación de ventas -->
                    <div class="bg-gray-50 px-6 py-3 border-t border-gray-200">
                        <div id="sales-pagination" class="flex items-center justify-between">
                            <!-- La paginación se cargará dinámicamente -->
                        </div>
                    </div>
                </div>
            </section>

            <section id="reports-section" class="content-section p-6">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Reportes y Estadísticas</h2>
                    <p class="text-gray-600">Análisis y reportes del negocio</p>
                </div>
                <!-- Filtros de reportes -->
                <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Generar Reportes</h3>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tipo de Reporte</label>
                            <select
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                <option>Ventas</option>
                                <option>Inventario</option>
                                <option>Stock</option>
                                <option>Clientes</option>
                                <option>Financiero</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Fecha Desde</label>
                            <input type="date"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                value="2025-08-01">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Fecha Hasta</label>
                            <input type="date"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                value="2025-08-08">
                        </div>
                        <div class="flex items-end">
                            <button
                                class="w-full bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2">
                                <i class="fas fa-chart-bar"></i>
                                Generar
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Reportes rápidos -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold text-gray-900">Ventas del Mes</h4>
                            <div class="bg-green-100 p-2 rounded-lg">
                                <i class="fas fa-chart-line text-green-600"></i>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Total Ventas:</span>
                                <span class="font-semibold">$15,247,350</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Transacciones:</span>
                                <span class="font-semibold">1,247</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Crecimiento:</span>
                                <span class="font-semibold text-green-600">+15.2%</span>
                            </div>
                        </div>
                        <button class="w-full mt-4 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-lg text-sm">
                            Ver Detalle
                        </button>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold text-gray-900">Top Productos</h4>
                            <div class="bg-blue-100 p-2 rounded-lg">
                                <i class="fas fa-trophy text-blue-600"></i>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                    <span class="text-gray-700 text-sm">El Alquimista</span>
                                </div>
                                <span class="font-semibold text-sm">152</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                                    <span class="text-gray-700 text-sm">Cien Años...</span>
                                </div>
                                <span class="font-semibold text-sm">134</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <div class="w-2 h-2 bg-orange-500 rounded-full"></div>
                                    <span class="text-gray-700 text-sm">Don Quijote</span>
                                </div>
                                <span class="font-semibold text-sm">98</span>
                            </div>
                        </div>
                        <button class="w-full mt-4 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-lg text-sm">
                            Ver Ranking
                        </button>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold text-gray-900">Estado Stock</h4>
                            <div class="bg-orange-100 p-2 rounded-lg">
                                <i class="fas fa-boxes text-orange-600"></i>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span class="text-gray-600">En Stock:</span>
                                <span class="font-semibold text-green-600">2,547</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Stock Bajo:</span>
                                <span class="font-semibold text-orange-600">23</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Agotados:</span>
                                <span class="font-semibold text-red-600">7</span>
                            </div>
                        </div>
                        <button class="w-full mt-4 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-lg text-sm">
                            Ver Stock
                        </button>
                    </div>
                </div>

                <!-- Gráfico de ventas -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Ventas por Mes</h3>
                            <div class="flex gap-2">
                                <button class="text-gray-400 hover:text-gray-600">
                                    <i class="fas fa-download"></i>
                                </button>
                                <button class="text-gray-400 hover:text-gray-600">
                                    <i class="fas fa-expand"></i>
                                </button>
                            </div>
                        </div>
                        <!-- Simulación de gráfico -->
                        <div class="h-64 bg-gray-50 rounded-lg flex items-end justify-around p-4">
                            <div class="flex flex-col items-center gap-2">
                                <div class="bg-indigo-500 w-8 rounded-t" style="height: 60px;"></div>
                                <span class="text-xs text-gray-600">Ene</span>
                            </div>
                            <div class="flex flex-col items-center gap-2">
                                <div class="bg-indigo-500 w-8 rounded-t" style="height: 80px;"></div>
                                <span class="text-xs text-gray-600">Feb</span>
                            </div>
                            <div class="flex flex-col items-center gap-2">
                                <div class="bg-indigo-500 w-8 rounded-t" style="height: 120px;"></div>
                                <span class="text-xs text-gray-600">Mar</span>
                            </div>
                            <div class="flex flex-col items-center gap-2">
                                <div class="bg-indigo-500 w-8 rounded-t" style="height: 90px;"></div>
                                <span class="text-xs text-gray-600">Abr</span>
                            </div>
                            <div class="flex flex-col items-center gap-2">
                                <div class="bg-indigo-500 w-8 rounded-t" style="height: 140px;"></div>
                                <span class="text-xs text-gray-600">May</span>
                            </div>
                            <div class="flex flex-col items-center gap-2">
                                <div class="bg-indigo-500 w-8 rounded-t" style="height: 110px;"></div>
                                <span class="text-xs text-gray-600">Jun</span>
                            </div>
                            <div class="flex flex-col items-center gap-2">
                                <div class="bg-indigo-500 w-8 rounded-t" style="height: 160px;"></div>
                                <span class="text-xs text-gray-600">Jul</span>
                            </div>
                            <div class="flex flex-col items-center gap-2">
                                <div class="bg-indigo-600 w-8 rounded-t" style="height: 180px;"></div>
                                <span class="text-xs text-gray-600 font-semibold">Ago</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Categorías Más Vendidas</h3>
                            <div class="flex gap-2">
                                <button class="text-gray-400 hover:text-gray-600">
                                    <i class="fas fa-download"></i>
                                </button>
                                <button class="text-gray-400 hover:text-gray-600">
                                    <i class="fas fa-expand"></i>
                                </button>
                            </div>
                        </div>
                        <!-- Simulación de gráfico circular -->
                        <div class="h-64 flex items-center justify-center">
                            <div class="relative">
                                <div class="w-48 h-48 rounded-full border-8 border-indigo-500"
                                    style="border-right-color: #ef4444; border-bottom-color: #f59e0b; border-left-color: #10b981;">
                                </div>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-gray-900">2,547</div>
                                        <div class="text-sm text-gray-600">Total Libros</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-center gap-6 mt-4">
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 bg-indigo-500 rounded-full"></div>
                                <span class="text-sm text-gray-600">Ficción (40%)</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                <span class="text-sm text-gray-600">Ciencia (25%)</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                <span class="text-sm text-gray-600">Historia (20%)</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                <span class="text-sm text-gray-600">Otros (15%)</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabla de reportes generados -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-semibold text-gray-900">Reportes Generados</h3>
                            <button class="text-indigo-600 hover:text-indigo-800 text-sm font-medium">Ver todos</button>
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Nombre
                                        del Reporte</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Tipo
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Fecha
                                        Generación</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Periodo
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Tamaño
                                    </th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase">
                                        Acciones</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div
                                                class="h-10 w-10 bg-green-100 rounded-lg flex items-center justify-center mr-3">
                                                <i class="fas fa-file-excel text-green-600"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Ventas Agosto 2025</div>
                                                <div class="text-sm text-gray-500">Reporte detallado de ventas</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                                            Ventas
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">08 Ago 2025, 10:30
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">01-08 Ago 2025</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2.4 MB</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <div class="flex justify-end gap-2">
                                            <button class="text-indigo-600 hover:text-indigo-900" title="Descargar">
                                                <i class="fas fa-download"></i>
                                            </button>
                                            <button class="text-gray-600 hover:text-gray-900" title="Ver">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="text-red-600 hover:text-red-900" title="Eliminar">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div
                                                class="h-10 w-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                                                <i class="fas fa-file-pdf text-blue-600"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Inventario Completo</div>
                                                <div class="text-sm text-gray-500">Estado actual del inventario</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">
                                            Inventario
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">07 Ago 2025, 16:20
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">07 Ago 2025</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">856 KB</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <div class="flex justify-end gap-2">
                                            <button class="text-indigo-600 hover:text-indigo-900" title="Descargar">
                                                <i class="fas fa-download"></i>
                                            </button>
                                            <button class="text-gray-600 hover:text-gray-900" title="Ver">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="text-red-600 hover:text-red-900" title="Eliminar">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="users-section" class="content-section p-6">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Gestión de Usuarios</h2>
                    <p class="text-gray-600">Administra usuarios y permisos del sistema</p>
                </div>
                <!-- Estadísticas de usuarios -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                    <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-600 text-sm font-medium uppercase tracking-wide">Total Usuarios</p>
                                <p class="text-3xl font-bold text-gray-900" id="total-users-count">0</p>
                                <p class="text-blue-600 text-sm mt-1">Activos en el sistema</p>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <i class="fas fa-users text-blue-600 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-green-600 text-sm font-medium uppercase tracking-wide">Usuarios Activos
                                </p>
                                <p class="text-3xl font-bold text-gray-900" id="active-users-count">0</p>
                                <p class="text-green-600 text-sm mt-1">Estado activo</p>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <i class="fas fa-user-check text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-yellow-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-yellow-600 text-sm font-medium uppercase tracking-wide">Administradores
                                </p>
                                <p class="text-3xl font-bold text-gray-900" id="admin-users-count">0</p>
                                <p class="text-yellow-600 text-sm mt-1">Permisos completos</p>
                            </div>
                            <div class="bg-yellow-100 p-3 rounded-full">
                                <i class="fas fa-user-shield text-yellow-600 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-purple-600 text-sm font-medium uppercase tracking-wide">Nuevos Este Mes
                                </p>
                                <p class="text-3xl font-bold text-gray-900" id="new-users-count">0</p>
                                <p class="text-purple-600 text-sm mt-1">Registros este mes</p>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-full">
                                <i class="fas fa-user-plus text-purple-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Acciones de usuario -->
                <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Gestión de Usuarios</h3>
                        <div class="flex gap-2">
                            <button id="add-user-btn"
                                class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center gap-2">
                                <i class="fas fa-user-plus"></i>
                                Agregar Usuario
                            </button>
                            <button
                                class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg flex items-center gap-2">
                                <i class="fas fa-download"></i>
                                Exportar
                            </button>
                        </div>
                    </div>
                    <div class="flex flex-col sm:flex-row gap-4">
                        <div class="relative flex-1">
                            <i
                                class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input type="text" id="users-search" placeholder="Buscar usuarios..."
                                class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <select id="users-rol-filter"
                            class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="">Todos los roles</option>
                            <option value="admin">Administrador</option>
                            <option value="seller">Vendedor</option>
                            <option value="inventory">Inventario</option>
                            <option value="readonly">Solo Lectura</option>
                        </select>
                        <select id="users-estado-filter"
                            class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="">Todos los estados</option>
                            <option value="activo">Activo</option>
                            <option value="inactivo">Inactivo</option>
                            <option value="suspendido">Suspendido</option>
                        </select>
                    </div>
                </div>

                <!-- Lista de usuarios -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-semibold text-gray-900">Lista de Usuarios</h3>
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium"
                                id="users-count-badge">0 usuarios</span>
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full" id="users-table">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Usuario</th>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Email</th>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Rol</th>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Último Acceso</th>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Estado</th>
                                    <th
                                        class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Acciones</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200" id="users-tbody">
                                <!-- Los usuarios se cargarán dinámicamente aquí -->
                            </tbody>
                        </table>
                    </div>
                    <div class="bg-gray-50 px-6 py-3 border-t border-gray-200" id="users-pagination">
                        <!-- La paginación se generará dinámicamente aquí -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Mobile Sidebar Overlay -->
    <div id="sidebarOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden hidden"></div>

    <!-- Toast Container -->
    <div id="toastContainer" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg p-6 flex items-center space-x-3">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
            <span class="text-gray-700">Cargando...</span>
        </div>
    </div>

    <!-- Modal Nuevo Usuario -->
    <div id="user-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <!-- Header del Modal -->
            <div class="flex justify-between items-center p-6 border-b border-gray-200">
                <div class="flex items-center gap-3">
                    <div class="bg-indigo-100 p-2 rounded-lg">
                        <i class="fas fa-user-plus text-indigo-600 text-xl"></i>
                    </div>
                    <div>
                        <h3 id="modal-title" class="text-xl font-bold text-gray-900">Nuevo Usuario</h3>
                        <p class="text-sm text-gray-600">Crear un nuevo usuario en el sistema</p>
                    </div>
                </div>
                <button id="close-modal-btn" class="text-gray-400 hover:text-gray-600 text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Formulario -->
            <form id="user-form" class="p-6 space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Nombre Completo -->
                    <div class="md:col-span-2">
                        <label for="user-name" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-user mr-2 text-indigo-500"></i>
                            Nombre Completo *
                        </label>
                        <input type="text" id="user-name" name="nombre" required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                            placeholder="Ej: Juan Carlos Pérez">
                    </div>

                    <!-- Email -->
                    <div>
                        <label for="user-email" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-envelope mr-2 text-indigo-500"></i>
                            Correo Electrónico *
                        </label>
                        <input type="email" id="user-email" name="email" required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                            placeholder="usuario@libreria.com">
                    </div>

                    <!-- Teléfono -->
                    <div>
                        <label for="user-phone" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-phone mr-2 text-indigo-500"></i>
                            Teléfono
                        </label>
                        <input type="tel" id="user-phone" name="telefono"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                            placeholder="3001234567">
                    </div>

                    <!-- Contraseña -->
                    <div>
                        <label for="user-password" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-lock mr-2 text-indigo-500"></i>
                            Contraseña *
                        </label>
                        <div class="relative">
                            <input type="password" id="user-password" name="password" required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                                placeholder="Mínimo 6 caracteres" minlength="6">
                            <button type="button" id="toggle-password"
                                class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">La contraseña debe tener al menos 6 caracteres</p>
                    </div>

                    <!-- Confirmar Contraseña -->
                    <div>
                        <label for="user-password-confirm" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-lock mr-2 text-indigo-500"></i>
                            Confirmar Contraseña *
                        </label>
                        <input type="password" id="user-password-confirm" name="password_confirm" required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                            placeholder="Repetir contraseña" minlength="6">
                    </div>

                    <!-- Rol -->
                    <div>
                        <label for="user-role" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-user-tag mr-2 text-indigo-500"></i>
                            Rol del Usuario *
                        </label>
                        <select id="user-role" name="rol" required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="">Seleccionar rol</option>
                            <option value="admin">Administrador - Acceso completo</option>
                            <option value="seller">Vendedor - Ventas e inventario</option>
                            <option value="inventory">Inventario - Gestión de stock</option>
                            <option value="readonly">Solo Lectura - Consultas únicamente</option>
                        </select>
                    </div>

                    <!-- Estado -->
                    <div>
                        <label for="user-status" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-toggle-on mr-2 text-indigo-500"></i>
                            Estado
                        </label>
                        <select id="user-status" name="estado"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="activo">Activo</option>
                            <option value="inactivo">Inactivo</option>
                        </select>
                    </div>

                    <!-- Dirección -->
                    <div class="md:col-span-2">
                        <label for="user-address" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-map-marker-alt mr-2 text-indigo-500"></i>
                            Dirección
                        </label>
                        <textarea id="user-address" name="direccion" rows="3"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                            placeholder="Dirección completa (opcional)"></textarea>
                    </div>
                </div>

                <!-- Información de Permisos -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <h4 class="font-semibold text-blue-800 mb-2">
                        <i class="fas fa-info-circle mr-2"></i>
                        Información sobre Roles
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-blue-700">
                        <div><strong>Administrador:</strong> Acceso completo al sistema</div>
                        <div><strong>Vendedor:</strong> Ventas, clientes e inventario básico</div>
                        <div><strong>Inventario:</strong> Gestión completa de stock y productos</div>
                        <div><strong>Solo Lectura:</strong> Consultas sin modificaciones</div>
                    </div>
                </div>

                <!-- Error Messages -->
                <div id="form-errors" class="hidden bg-red-50 border border-red-200 rounded-lg p-4">
                    <h4 class="font-semibold text-red-800 mb-2">
                        <i class="fas fa-exclamation-triangle mr-2"></i>
                        Errores en el formulario
                    </h4>
                    <ul id="error-list" class="list-disc list-inside text-sm text-red-700 space-y-1"></ul>
                </div>

                <!-- Botones -->
                <div class="flex justify-end gap-3 pt-4 border-t border-gray-200">
                    <button type="button" id="cancel-btn"
                        class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium">
                        <i class="fas fa-times mr-2"></i>
                        Cancelar
                    </button>
                    <button type="submit" id="save-user-btn"
                        class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg font-medium">
                        <i class="fas fa-save mr-2"></i>
                        <span id="save-btn-text">Crear Usuario</span>
                        <div id="save-spinner"
                            class="hidden ml-2 animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed top-4 right-4 space-y-2 z-50"></div>

    <!-- JavaScript Assets -->
    <!-- helpers.js eliminado - causaba interferencia -->
    <!-- auth.js eliminado - causaba redirects automáticos -->
    
    <!-- DEBUG: Limpiado - problema era caché del navegador -->
    
    <!-- SISTEMA DE CONTROL DE ACCESO POR ROLES -->
    <script>
        // Configuración de permisos por rol
        const ROLE_PERMISSIONS = {
            admin: {
                name: 'Administrador',
                sections: ['dashboard', 'inventory', 'stock', 'sales', 'reports', 'users'],
                description: 'Acceso completo al sistema'
            },
            seller: {
                name: 'Vendedor',
                sections: ['dashboard', 'inventory', 'sales', 'reports'],
                description: 'Gestión de ventas e inventario (solo lectura)'
            },
            inventory: {
                name: 'Inventario',
                sections: ['dashboard', 'inventory', 'stock'],
                description: 'Gestión completa de inventario y stock'
            },
            readonly: {
                name: 'Consulta',
                sections: ['dashboard', 'inventory', 'reports'],
                description: 'Solo lectura de información'
            }
        };

        // Función para obtener el rol del usuario actual
        function getCurrentUserRole() {
            try {
                const sessionData = localStorage.getItem('libreria_session');
                if (sessionData) {
                    const session = JSON.parse(sessionData);
                    return session.user?.rol || 'readonly';
                }
                return 'readonly';
            } catch (error) {
                console.error('Error al obtener rol del usuario:', error);
                return 'readonly';
            }
        }

        // Función para verificar si el usuario tiene acceso a una sección
        function hasAccessToSection(section) {
            const userRole = getCurrentUserRole();
            const roleConfig = ROLE_PERMISSIONS[userRole];
            
            if (!roleConfig) {
                console.warn(`Rol no reconocido: ${userRole}`);
                return false;
            }
            
            return roleConfig.sections.includes(section);
        }

        // Función para aplicar restricciones de acceso
        function applyAccessControl() {
            const userRole = getCurrentUserRole();
            const roleConfig = ROLE_PERMISSIONS[userRole];
            
            console.log(`🔐 Aplicando control de acceso para rol: ${roleConfig?.name || userRole}`);
            
            // Obtener todos los enlaces de navegación
            const navLinks = document.querySelectorAll('.nav-link[data-section]');
            
            navLinks.forEach(link => {
                const section = link.getAttribute('data-section');
                
                if (!hasAccessToSection(section)) {
                    // Ocultar sección no permitida
                    const listItem = link.closest('li');
                    if (listItem) {
                        listItem.style.display = 'none';
                        console.log(`❌ Sección "${section}" oculta para rol ${userRole}`);
                    }
                } else {
                    console.log(`✅ Sección "${section}" accesible para rol ${userRole}`);
                }
            });

            // Mostrar información del usuario en consola
            console.log(`👤 Usuario: ${roleConfig?.name || userRole}`);
            console.log(`📋 Secciones permitidas:`, roleConfig?.sections || []);
        }

        // Función de logout independiente
        function handleLogout() {
            if (confirm('¿Estás seguro de que deseas cerrar sesión?')) {
                console.log('🚪 Cerrando sesión...');
                
                // Limpiar completamente el localStorage
                localStorage.clear();
                
                // Mostrar mensaje (opcional)
                console.log('✅ Sesión cerrada correctamente');
                
                // Redirigir al login
                window.location.href = 'login.html';
            }
        }
        
        // Hacer funciones disponibles globalmente
        window.handleLogout = handleLogout;
        window.hasAccessToSection = hasAccessToSection;
        window.getCurrentUserRole = getCurrentUserRole;
        window.ROLE_PERMISSIONS = ROLE_PERMISSIONS;

        // Función para actualizar información del usuario en el header
        function updateUserHeader() {
            try {
                const sessionData = localStorage.getItem('libreria_session');
                if (sessionData) {
                    const session = JSON.parse(sessionData);
                    const user = session.user;
                    const roleConfig = ROLE_PERMISSIONS[user.rol] || { name: user.rol };
                    
                    // Actualizar nombre del usuario
                    const userNameElement = document.querySelector('.user-info p.font-medium');
                    if (userNameElement && user.name) {
                        userNameElement.textContent = user.name;
                    }
                    
                    // Actualizar rol del usuario
                    const userRoleElement = document.querySelector('.user-info p.text-sm');
                    if (userRoleElement) {
                        userRoleElement.textContent = roleConfig.name;
                        
                        // Agregar color según el rol
                        userRoleElement.className = 'text-sm opacity-75';
                        switch(user.rol) {
                            case 'admin':
                                userRoleElement.className += ' text-yellow-200';
                                break;
                            case 'seller':
                                userRoleElement.className += ' text-green-200';
                                break;
                            case 'inventory':
                                userRoleElement.className += ' text-blue-200';
                                break;
                            case 'readonly':
                                userRoleElement.className += ' text-gray-300';
                                break;
                        }
                    }
                    
                    console.log(`👤 Header actualizado para: ${user.name} (${roleConfig.name})`);
                }
            } catch (error) {
                console.error('Error al actualizar header del usuario:', error);
            }
        }

        // Aplicar control de acceso cuando se carga la página
        document.addEventListener('DOMContentLoaded', () => {
            // Esperar un poco para que se carguen todos los elementos
            setTimeout(() => {
                applyAccessControl();
                updateUserHeader();
            }, 100);
        });
    </script>
    <!-- Core JavaScript -->
    <script src="assets/js/main.js"></script>
    
    <!-- Modales de Ventas -->
    
    <!-- Modal Nueva Venta -->
    <div id="new-sale-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-10 mx-auto p-5 border w-11/12 md:w-4/5 lg:w-3/4 xl:w-2/3 shadow-lg rounded-md bg-white">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-semibold text-gray-900">Nueva Venta</h3>
                <button id="close-new-sale-modal" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Información de cliente y búsqueda -->
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Cliente *</label>
                        <select id="sale-client-select" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="">Seleccionar cliente...</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Buscar Libros</label>
                        <div class="relative">
                            <input type="text" id="sale-book-search" placeholder="Buscar por título, autor o ISBN..."
                                class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        </div>
                        <div id="book-search-results" class="hidden absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"></div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Método de Pago</label>
                            <select id="payment-method" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="efectivo">Efectivo</option>
                                <option value="tarjeta_credito">Tarjeta de Crédito</option>
                                <option value="tarjeta_debito">Tarjeta de Débito</option>
                                <option value="transferencia">Transferencia</option>
                                <option value="cheque">Cheque</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Descuento ($)</label>
                            <input type="number" id="sale-discount" min="0" step="1000" value="0"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Notas (Opcional)</label>
                        <textarea id="sale-notes" rows="3" placeholder="Notas adicionales sobre la venta..."
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                    </div>
                </div>

                <!-- Items de venta y totales -->
                <div class="space-y-6">
                    <div>
                        <h4 class="text-lg font-medium text-gray-900 mb-4">Items de la Venta</h4>
                        <div id="sale-items" class="space-y-3 max-h-80 overflow-y-auto"></div>
                    </div>

                    <!-- Totales -->
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Subtotal:</span>
                                <span id="sale-subtotal" class="font-medium">$0</span>
                            </div>
                            <div class="flex justify-between border-t pt-2">
                                <span class="text-lg font-semibold">Total:</span>
                                <span id="sale-total" class="text-lg font-bold text-green-600">$0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Botones de acción -->
            <div class="flex justify-end gap-3 mt-8">
                <button id="cancel-sale-btn" class="px-6 py-2 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-lg">
                    Cancelar
                </button>
                <button id="save-sale-btn" class="px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg flex items-center gap-2">
                    <i class="fas fa-save"></i>
                    Guardar Venta
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Detalle de Venta -->
    <div id="sale-detail-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-10 mx-auto p-5 border w-11/12 md:w-4/5 lg:w-1/2 shadow-lg rounded-md bg-white">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-semibold text-gray-900">Detalles de Venta</h3>
                <button id="close-sale-detail-modal" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div id="sale-detail-content">
                <!-- El contenido se cargará dinámicamente -->
            </div>
        </div>
    </div>

    <!-- Paginación de Ventas -->
    <div id="sales-pagination" class="flex items-center justify-between mt-6">
        <!-- La paginación se cargará dinámicamente -->
    </div>

    <!-- Authentication and Permissions -->
    <script src="assets/js/auth/permission-manager.js"></script>
    
    <!-- Application Modules -->
    <script src="assets/js/modules/navigation.js"></script>
    <script src="assets/js/components/dashboard.js"></script>
    <script src="assets/js/modules/section-observer.js"></script>
    <script src="assets/js/modules/inventory-manager.js"></script>
    <script src="assets/js/modules/sales-manager.js"></script>
    <script src="assets/js/modules/users-manager.js"></script>
    <script src="assets/js/inventory-init.js"></script>
    <script src="assets/js/modules/app-init.js"></script>
</body>

</html>